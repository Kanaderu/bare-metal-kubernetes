---

  - name: create a git server
    hosts: "{{ node_k8s_client }}"
    vars_prompt:
      - name: node_k8s_client
        prompt: "Supply the hosts list:"
        private: no
        default: 'k8sm'
    vars_files:
      - vaults/general.yml
      - vaults/git.yml
    vars:
      MYSQL_ROOT_PASSWORD: "{{ vault_MYSQL_ROOT_PASSWORD }}"
      MYSQL_DATABASE: "{{ vault_MYSQL_DATABASE }}"
      MYSQL_USER: "{{ vault_MYSQL_USER }}"
      MYSQL_PASSWORD: "{{ vault_MYSQL_PASSWORD }}"
    tasks:
      - include_role:
          name: gitea
    environment:
      PATH: "{{ ansible_env.PATH }}:/usr/local/bin"
